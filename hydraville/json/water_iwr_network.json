{
    "nodes": [
        {
          "name": "catchment1",
          "type": "catchment",
          "flow": "catchment1_inflow"
        },
        {
          "name": "catchment2",
          "type": "catchment",
          "flow": "catchment2_inflow"
        },
        {
          "name": "catchment3",
          "type": "catchment",
          "flow": "catchment3_inflow"
        },
        {
          "name": "catchment4",
          "type": "catchment",
          "flow": "catchment4_inflow"
        },
        {
          "name": "catchment5",
          "type": "catchment",
          "flow": "catchment5_inflow"
        },
        {
          "name": "river1",
          "type": "river"
        },
        {
          "name": "river2",
          "type": "river"
        },
        {
          "name": "river3",
          "type": "river"
        },
        {
          "name": "river4",
          "type": "river"
        },
        {
          "name": "river5",
          "type": "river"
        },
        {
          "name": "reservoir1",
          "type": "storage",
          "initial_volume": 200,
          "max_volume": "reservoir1_capacity"
        },
        {
          "name": "reservoir2",
          "type": "storage",
          "initial_volume": 200,
          "max_volume": "reservoir2_capacity"
        },
        {
          "name": "spill1",
          "type": "river",
          "cost": 10000
        },
        {
          "name": "spill2",
          "type": "river",
          "cost": 10000
        },
        {
          "name": "hydropower_plant1_generation",
          "type": "river",
          "max_flow": "hydropower_plant1_control"
        },
        {
          "name": "hydropower_plant2_generation",
          "type": "river",
          "max_flow": "hydropower_plant2_control"
        },
        {
          "name": "irrigation1_canal1",
          "type": "link",
          "max_flow": "canal1_capacity"
        },
        {
          "name": "irrigation1_canal2",
          "type": "link",
          "max_flow": "canal2_capacity"
        },
        {
          "name": "irrigation2_canal3",
          "type": "link",
          "max_flow": "canal3_capacity"
        },
        {
          "name": "water_supply1_canal4",
          "type": "link",
          "max_flow": "canal4_capacity"
        },
        {
          "name": "irrigation1",
          "type": "Output",
          "max_flow": "irrigation1_demand",
          "cost": -10000      
        },
        {
          "name": "return_flow_irrigation1",
          "type": "input"
        },
        {
          "name": "irrigation1_return_ratio",
          "type": "aggregatednode",
          "factors": [1, 0.15],
          "nodes": [
            "irrigation1",
            "return_flow_irrigation1"
          ]
        },
        {
          "name": "irrigation2",
          "type": "Output",
          "max_flow": "irrigation2_demand",
          "cost": -10000
        },
        {
          "name": "return_flow_irrigation2",
          "type": "input"
        },
        {
          "name": "irrigation2_return_ratio",
          "type": "aggregatednode",
          "factors": [1, 0.15],
          "nodes": [
            "irrigation2",
            "return_flow_irrigation2"
          ]
        },
        {
          "name": "water_supply1",
          "type": "Output",
          "max_flow": "water_supply1_demand",
          "cost": -100000        
        },
        {
          "name": "term1",
          "type": "output"
        }
      ],
      "edges": [
        [
          "catchment1",
          "river1"
        ],
        [
          "river1",
          "irrigation1_canal1"
        ],
        [
          "irrigation1_canal1",
          "irrigation1"
        ],
        [
          "return_flow_irrigation1",
          "river2"
        ],
        [
          "river1",
          "river2"
        ],
        [
          "catchment3",
          "river2"
        ],
        [
          "river2",
          "reservoir2"
        ],
        [
          "catchment2",
          "reservoir1"
        ],
        [
          "reservoir1",
          "irrigation1_canal2"
        ],
        [
          "irrigation1_canal2",
          "irrigation1"
        ],
        [
          "reservoir1",
          "spill1"
        ],
        [
          "reservoir1",
          "hydropower_plant1_generation"
        ],
        [
          "spill1",
          "river3"
        ],
        [
          "hydropower_plant1_generation",
          "river3"
        ],
        [
          "river3",
          "reservoir2"
        ],
        [
          "catchment4",
          "reservoir2"
        ],
        [
          "reservoir2",
          "water_supply1_canal4"
        ],
        [
          "water_supply1_canal4",
          "water_supply1"
        ],
        [
          "reservoir2",
          "hydropower_plant2_generation"
        ],
        [
          "hydropower_plant2_generation",
          "river4"
        ],
        [
          "reservoir2",
          "irrigation2_canal3"
        ],
        [
          "irrigation2_canal3",
          "irrigation2"
        ],
        [
          "catchment5",
          "river5"
        ],
        [
          "river5",
          "irrigation2"
        ],
        [
          "return_flow_irrigation2",
          "river4"
        ],
        [
          "river5",
          "river4"
        ],
        [
          "reservoir2",
          "spill2"
        ],
        [
          "spill2",
          "river4"
        ],
        [
          "river4",
          "term1"
        ]
      ],
      "parameters": {
        "catchment1_inflow": {
          "type": "dataframe",
          "url": "../data/catchmod_flows_by_catchment_sub010.h5",
          "scenario": "weather",
          "key": "catchment1_cntr",
          "comment": "units [hm^3/day]"
        },
        "catchment2_inflow": {
          "type": "dataframe",
          "url": "../data/catchmod_flows_by_catchment_sub010.h5",
          "scenario": "weather",
          "key": "catchment2_cntr",
          "comment": "units [hm^3/day]"
        },
        "catchment3_inflow": {
          "type": "dataframe",
          "url": "../data/catchmod_flows_by_catchment_sub010.h5",
          "scenario": "weather",
          "key": "catchment3_cntr",
          "comment": "units [hm^3/day]"
        },
        "catchment4_inflow": {
          "type": "dataframe",
          "url": "../data/catchmod_flows_by_catchment_sub010.h5",
          "scenario": "weather",
          "key": "catchment4_cntr",
          "comment": "units [hm^3/day]"
        },
        "catchment5_inflow": {
          "type": "dataframe",
          "url": "../data/catchmod_flows_by_catchment_sub010.h5",
          "scenario": "weather",
          "key": "catchment5_cntr",
          "comment": "units [hm^3/day]"
        },

        "rainfall": {
            "type": "monthlyprofile",
            "values": [1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3]
        },

        "et": {
            "type": "monthlyprofile",
            "values": [1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3]
        },

        "irrigation1_iwr_rice": {
          "type": "IrrigationWaterRequirement",
          "rainfall_parameter": "rainfall",
          "et_parameter": "et",
          "crop_water_factor_parameter": {
            "type": "monthlyprofile",
            "values": [1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3]
          },
          "area": 100.0,
          "reference_et": 1,
          "yield_per_area": 1.23,
          "revenue_per_yield": 4.56
        },

        "irrigation2_iwr_rice": {
          "type": "IrrigationWaterRequirement",
          "rainfall_parameter": "rainfall",
          "et_parameter": "et",
          "crop_water_factor_parameter": {
            "type": "monthlyprofile",
            "values": [1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3]
          },
          "area": 100.0,
          "reference_et": 1,
          "yield_per_area": 1.23,
          "revenue_per_yield": 4.56
        },

        "irrigation1_iwr_tomatoes": {
          "type": "IrrigationWaterRequirement",
          "rainfall_parameter": "rainfall",
          "et_parameter": "et",
          "crop_water_factor_parameter": {
            "type": "monthlyprofile",
            "values": [1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3]
          },
          "area": 100.0,
          "reference_et": 1,
          "yield_per_area": 1.23,
          "revenue_per_yield": 4.56
        },

        "irrigation2_iwr_tomatoes": {
          "type": "IrrigationWaterRequirement",
          "rainfall_parameter": "rainfall",
          "et_parameter": "et",
          "crop_water_factor_parameter": {
            "type": "monthlyprofile",
            "values": [1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3]
          },
          "area": 333.0,
          "reference_et": 1,
          "yield_per_area": 1.23,
          "revenue_per_yield": 4.56
        },



        "irrigation1_demand": {
          "type": "aggregated",
          "agg_func": "sum",
          "parameters": [
            "irrigation1_iwr_rice",
            "irrigation1_iwr_tomatoes"
          ]
        },
        "irrigation2_demand": {
          "type": "aggregated",
          "agg_func": "sum",
          "parameters": [
            "irrigation2_iwr_rice",
            "irrigation2_iwr_tomatoes"
          ]
        },
        "water_supply1_demand": {
          "type": "dataframe",
          "url": "../data/we-demand_data.xls",
          "index_col": "timestamp",
          "column": "Dwater-supply1_demand",
          "comment": "units [hm^3/day]"
        },
        "canal1_capacity": {
          "type": "constant",
          "value": 4.0,
          "is_variable": true,
          "upper_bounds": 6.0,
          "lower_bounds": 0,
          "comment": "units [hm^3/day]"
        },
        "canal2_capacity": {
          "type": "constant",
          "value": 4.0,
          "is_variable": true,
          "upper_bounds": 6.0,
          "lower_bounds": 0,
          "comment": "units [hm^3/day]"
        },
        "canal3_capacity": {
          "type": "constant",
          "value": 4.5,
          "is_variable": true,
          "upper_bounds": 6.0,
          "lower_bounds": 0,
          "comment": "units [hm^3/day]"
        },
        "canal4_capacity": {
          "type": "constant",
          "value": 2.0,
          "is_variable": true,
          "upper_bounds": 3.5,
          "lower_bounds": 0,
          "comment": "units [hm^3/day]"
        },
        "reservoir1_capacity": {
          "type": "constant",
          "value": 900,
          "is_variable": true,
          "upper_bounds": 1500,
          "lower_bounds": 0,
          "comment": "units [hm^3]"
        },
        "reservoir2_capacity": {
          "type": "constant",
          "value": 600,
          "is_variable": true,
          "upper_bounds": 1500,
          "lower_bounds": 0,
          "comment": "units [hm^3]"
        },
        "hydropower_plant1_control": {
          "type": "controlcurve",
          "storage_node": "reservoir1",
          "control_curve": "hydropower_cc1",
          "parameters": [
            "hydropower1_above",
            "hydropower1_below"
          ]
        },
        "hydropower_cc1": {
          "type": "constant",
          "value": 0.5
        },
        "hydropower1_above": {
          "type": "constant",
          "value": 10,
          "upper_bounds": 20,
          "lower_bounds": 0.0,
          "is_variable": true,
          "comment": "units [hm^3/day]"
        },
        "hydropower1_below": {
          "type": "constant",
          "value": 0.0
        },
        "hydropower_plant2_control": {
          "type": "controlcurve",
          "storage_node": "reservoir2",
          "control_curve": "hydropower_cc2",
          "parameters": [
            "hydropower2_above",
            "hydropower2_below"
          ]
        },
        "hydropower_cc2": {
          "type": "constant",
          "value": 0.5
        },
        "hydropower2_above": {
          "type": "constant",
          "value": 10,
          "upper_bounds": 20,
          "lower_bounds": 0.0,
          "is_variable": true,
          "comment": "units [hm^3/day]"
        },
        "hydropower2_below": {
          "type": "constant",
          "value": 0.0
        }
      },
      "recorders": {
        "irrigation1_effective_yield": {
          "type": "RelativeCropYieldRecorder",
          "node": "irrigation1",
          "temporal_agg_func": "sum"
        },
        "irrigation2_effective_yield": {
          "type": "RelativeCropYieldRecorder",
          "node": "irrigation2",
          "temporal_agg_func": "sum"
        },



        "irrigation1_deficit_frequency": {
          "type": "deficitfrequencynodeRecorder",
          "node": "irrigation1",
          "is_objective": null
        },
        "irrigation2_deficit_frequency": {
          "type": "deficitfrequencynodeRecorder",
          "node": "irrigation2",
          "is_objective": null
        },
        "water_supply_deficit_frequency": {
          "type": "deficitfrequencynodeRecorder",
          "node": "water_supply1",
          "is_objective": null
        },
        "aggregated_deficit_frequency": {
          "type": "aggregatedrecorder",
          "recorder_agg_func": "mean",
          "recorders": [
            "water_supply_deficit_frequency",
            "irrigation1_deficit_frequency",
            "irrigation2_deficit_frequency"
          ],
          "is_objective": "minimise"
        },
        "reservoir1_capex": {
          "type": "MeanParameterRecorder",
          "parameter": "reservoir1_capacity",
          "factor": 12456,
          "comment": "annualised cost units [$/hm^3]"
        },
        "reservoir2_capex": {
          "type": "MeanParameterRecorder",
          "parameter": "reservoir2_capacity",
          "factor": 9982,
          "comment": "annualised cost units [$/hm^3]"
        },
        "canal1_capex": {
          "type": "MeanParameterRecorder",
          "parameter": "canal1_capacity",
          "factor": 8094058,
          "comment": "annualised cost units [$/hm^3/day]"
        },
        "canal2_capex": {
          "type": "MeanParameterRecorder",
          "parameter": "canal2_capacity",
          "factor": 8094058,
          "comment": "annualised cost units [$/hm^3/day]"
        },
        "canal3_capex": {
          "type": "MeanParameterRecorder",
          "parameter": "canal3_capacity",
          "factor": 4002006,
          "comment": "annualised cost units [$/hm^3/day]"
        },
        "canal4_capex": {
          "type": "MeanParameterRecorder",
          "parameter": "canal4_capacity",
          "factor": 678526,
          "comment": "annualised cost units [$/hm^3/day]"
        },
        "water_total_capex": {
          "type": "aggregated",
          "recorder_agg_func": "sum",
          "recorders": [
            "reservoir1_capex",
            "reservoir2_capex",
            "canal1_capex",
            "canal2_capex",
            "canal3_capex",
            "canal4_capex"
          ],
          "is_objective": "minimise"
        }
    }
}